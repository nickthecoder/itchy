Current Tasks
=============

Look over all TODOs

Load/Save all scenes in all games to convert them to the new format.

Check order of Role onAttach and onBirth, I think it should be reversed.
    Remove the special "onBirth" in DelayedActivation, and put a special instanceof DelayedActivation when attach is called. 

Get Pause working - which games use it ?




Remove Actor.getActivationDelay, and put it in SceneDesignerRole (which is then loaded directly into DelayedActivation) ?

Escape does "cancel" on all "Edit" forms, and "close" on Lists.

SubjectProperty should include the method getClassName() ?

Implement change Layout in scene designer.

Renaming a Layer/Layout will need to alter all scenes???

All resources.renameXXX needs to update the renamed collection, so that renameSubjectsInScenes will work. 
    And do the same with other resources. Layouts, Fonts, ... ?


BUGS
====

Destroy-Debris completed scene doesn't work.

If no layout specified, and there is no "default" layout, then nothing works.

Reload resources - not quite working (only the thumbnails of the list screens?)

Appearance.fixPose doesn't do the right thing with direction.
	Setting dir to 0 works, but ideally both appearance and the new pose should have the old appearance's direction,
	and yet the pose won't need rotating.

Can delete Poses which are used in a Framed animation
    Ditto for a Sprite.


New Features
============


Client/Server views.
    A server runs the game, calling the director,scenedirector,roles ticks etc.
    The server sends each client a list of views containing a list of "appearances" (the data, not the images)
    Client renders these view using the local images
    Clients sends a list of events (keyboard, mouse)

    Dynamics poses are an issue. Solutions:
        disallow them completely (Limiting)
        allow them to be sent ONCE at the beginning of the session (Needs extra code, but is possible).
        allow code to generate them within the clients (Bad idea).
        
        Note. Pose PoseResource may need to be refactored again so that ALL poses have a name, and are in Resources.

    This can let anybody play any game remotely just by downloading the resources. No game code needs to run on
    their machine! Cool.
        Resources could be automatically downloaded, and for bonus points, do this using bittorrent technology.
    
    
Stickflick?
    

Undo/Redo for Z Order Reset
    Create a "Group" undo/redo, and add each zorder change to that group.
    Undo/redo the group as one.

Undo/Redo for destructive edits, such as changing class names (e.g. Makeup)

SceneDesigner: one dotted box for the screen's  bounds, and another for the current view's if they are different.
    Make both semi-transparent?


Game.loadScene, calls Role.sceneCreated only for the "main" load, not for additional scenes, such as
    glass view for highscores, lives etc.


Ensure Scrollbars of Scroll do not obscure the contents?

Cover-of-Darkness Menu : A street - you are driving the van. Park outside a house to start the level.
    Streets with lights on are "locked"

Bean Animation. Change the value of a Role's property.

Debris-rocks - pieces have offsets, so they explode naturally.
    Can I use Fragments class as this already does what I want?
    Make Fragments an abstract base class, then implement :
        RandomFragments - (What Fragments currently does)
        FloodFillFragments - Flood fill based on transparency for the keyboard and "K"
        ColorKeyFragments - for the others Pyrox rocks, or maybe Random with a fixed key (to ensure pieces are not too small).


Editor to test if resources have changed and prompt for confirm before exiting.


Animations to apply start/end events, so that sounds can be played.
	Can also be used to assign a new Pose during a non-framed based animation.


Have a preview image of the animation in FramedAnimationEditor.
	Single step back/forward or continuous.
	In fact, don't have the list or poses, just show one frame's details, and scroll back/forward to edit others.

Redesign editor based on a traditional IDE style layout.
    Left panel contains tree structure of all objects (Poses/Animations/Inputs/Costumes/Scenes etc)
        Can subset the list for a single type (e.g. just Poses)
        Hide those views if there are no children
    Central "Edit" panel will display the currently selected object (pose/animation etc).
    "Pin" any view to add it as a tab, otherwise it vanishes when another view is selected.
        Save "pinned" views as Preferences, so they are visible after restarting the editor.
    Can be editing multiple items simultaneously, each with its own tab.
        This will have impact on renamed poses etc. Maybe very tricky!
        Maybe abandon Ok/Cancel, and always auto-update.
        Notepad will need "<" and ">" navigation items, when tabs cannot all fit.
    Left panel can also have a "favourites" view and a "Recent" view.
    Toolbar items for Add Pose/Sprite Sheet/Animation/Sound/Input etc.
    SceneDesigner to co-exist, just like any SubEditor.
        The actors in a scene are also listed in the main tree view.
            Shortcut for toolbox pages automatically shows the toolbox.
        Toolbox not free floating
            Either hidden (when not in scene designer), or taking up full width at bottom of screen.
    Toolbox and Side Panel can be hidden/shown via a toggle button in the toolbar (and shortcut).
        Toolbar is always visible
        Toolbar changes depending on what is being edited.
    Still have the Tables (when a category is selected)?


Nice-to-have Features
=====================



Use Scroll for TextArea, instead of its buggy, self implemented, non-clipping scroller.
    Clip the TextBox input too.

Be able to select text in EntryBoxes, and copy/cut/delete the selected text.
    Double click to select a word.

Spritesheet : Crop. Remove all transparent edges, updating the x,y offsets appropriately.
    Use this on the mings spritesheet.

ColorKeyFragment. Use another pose, to decide which pixels belong to each fragment.
    If the poses aren't the same size, then scale non blended.


Code Tidy Up
============

Remove deprecate Resources.getCompanionCostume.

Scrap the concept of views within views?
    Just have lists of views, all are relative to the screen. Makes it MUCH simpler!
    Need to look at Window/RootContainer first.
    Also need to consider ZOrder of views.
        Perhaps keep the hierarchy of views for the z-order, but make each view relative to the screen, not the parent view.

Load/Save using properties wherever possible.
   

MouseListenerView - Why is Game passed to its methods?

Look at ScriptManager's createXXX methods, and see where they are called from.
    Consider removing createXXX methods, and doing it via ClassName.createInstance instead.

Pixelator has a bodge in it. Sometime it needs to add one to all the pixels.
	Do a test, and see if the top row of pixels are blank for large scales, and if so,
		then move blit to another surface before embossing the edges.
	Rename it EmbossEdgesPixelator? Create EmbossPixelator, which embosses every pixel.

WTF is Animation.startExceptFirst ? Parallel certainly doesn't do anything sensible!
	Used when merging two animations. Do it better!!!

Move GraphicsContext to the gui package? Is it used elsewhere (for stages?)

Pyrox : gridRole.onBirth looks like rubbish. Is it called?
Pyrox : gridRole.talk looks weird.

Look at companion, it has font, font size and color. Why ????
    Check sub classes for get/set for font colour size etc. I think this is done now???
    Check sub classes for margins???

Talk and TalkProjectile
    Talk doesn't have "fade", which is the only reason that Gate uses TalkProjectile (it doesn't move!!!)
    Should talk use animations to fade and die or a constant, hard-wired fade?
    Do we need Talk.stop now that we have TalkProjectile? It was originally there, so that it wouldn't follow!

    Zoom in/out : Scale all GridRole objects. Care needed if/when creating new objects.

Should TextPose have a TextStyle, rather than individual attributes?

Why have a Role interface if everything will end up using AbstractRole?
    Why does Role have "birth" and yet everything uses onBirth() ? Ditto with other events.
    At least make Role have the methods that people will actually use ie. onBirth rather than birth.

Disallow roles being removed and added to an actor. An actor has a role for life.
    If you need to change behaviour, do it like the Mings do it, and have a separate class hierarchy. 
    Hmm, Pause does exactly that!
        Probably a bad design, as the user's roles may do some of their own stuff in onActive, and
        not expect it to be called when unpaused.
    Delayed Activation also works like this!

Rox Ideas
=========
    Have a music layer, which has notes at each point. When an object moves over it, call that note's event to play the note.
        When a player stays one square, continue to play the square's note(s)
            The player has events, and the squares have event names. Use animations to control the sequence of notes played?
                Use the player's animations, but animate the Note object so that it doesn't interfere with the player's normal animation.
        Can have a high tempo piece whenever you hover on a "dangerous" or important square.
        Different characters will play different samples (but of the same basic note).
        The "correct" way through the puzzle should always sound harmonious
        Have set riffs, which can be played in different keys.
            While moving across a same-key field, it will sound like "Bah-Bah-Bah-Bah" for each square walked.
            Then when you stand still, the riff continues "Bah-da-da-da-Bah-da-da".
        Some square are silent.
        The square knows the name of the note, but the level know the instrument to use. The sample to use if "$instrument-$note".
        Some music squares can change the instrument too. From and To at choke points
        Use the editor's strings to define the riffs??
        Would be nice to have a visual representation of the music squares values.
            Use Makeup to achieve this?
            Can use colour to denote the note - hue for A-G and saturation/brightness for the octave. Background pattern for the instrument.
        Put the music in the grid at the same time as the GridRoles.
        Use classic songs for some obvious-ish pathways.


Other Stuff
===========

SDL Drop event to add poses by dragging image files.

SceneDesigner for Text
    Don't have a "Text" tool??
    The thumbnail should have the font-size in the bottom right if its bigger than the thumbnail can display.
        Using an Editor's font, because we want a plain, consistent font.
    When saving an actor, only save the attributes which differ from the costume's style.
    Have a "Reset to Costume Defaults", and a "Apply to Costume" buttons.

Group Costumes on the SceneDesigner's toolbox, so that similar costumes can be displayed as a single item.
    Clicking it reveals a popup, where the actual Costume can be selected.
    Use this for Pyrox's machines, one way streets.
        A costume can have a "Group Leader" field, which is the name of the Costume that is displayed as the
        main icon in the scene design toolbox. Similar impl as "costume base"
    Instead of a Popup, when the group leader is clicked, reveal the "children". Click to hide them. Leader will be there twice???
        If costume has a "leader" pose, then use that instead of default.

SceneDesigner : select groups of actors, and move/delete them together.

Create a Background interface :
    NoBackground, RGBABackground
    Tile, BrickH, BrickV, TileH, TileV (spacing can be different to the image size)
    We already have Renderable, which can do nine-patches and flat colour.
    Should the background be scrollable?

Explosion and Projectile don't work very well with text - See Gate.collected.

Should Costumes have Makeup? If each jewel is given a Sparkle makeup, does it make sense to apply it to every jewel in the scene?
    No. A diamond costume would specify a standard makeup, which can be overridden if needed.
    Have a reset button to revert to the costume's makeup, or default makeup if it has none.
    Costumes' makeup just like animations - based on events, and can have multiple options picked a random.
	One Makeup shared by many costumes, so it has its own tab, just like animation. 

GUIView.keyUp does nothing - is this ok?

Later
=====

Use JBox2D : http://www.jbox2d.org/

Joystick input devices.

BlitModes on Pose, so a "spotlight" can ADD

"Duplicate" button in Animation editor - maybe on Costume too.

Drag and drop to move and reorder animation in the editor.
    Replace the whole AnimationEditor with a timeline, where sequence are arranged left to right and parallel are stacked top to bottom.
    Test and edit are done in the same full screen editor - like scene designer.
    Add: Pick a pose, then place it on the world.
    A large time-line pane shows an overview of the animation. Dragging controls will change the tick or loops of the animation.
        Can fill the whole page, with the animation on top of it.
    Click at a point in the time-line to show that frame.
    Save the pose and start x,y, direction, heading with each animation ("test" tag)


Much Later
==========

Simple convolution filter
    Filters don't need to be square.
    Create empty space around the image. Later give option of duping the image's edge.
    Apply the convolution matrix.
        For RGB, just apply the matrix to each channel in turn.
        For RGBA we'd need to change the final DIVIDE to discount transparent pixels. i.e divide by sum of matrix * alphas.
        Apply the matrix to alpha as normal.

   Many things just need the alpha channel convolved?

Look at rotozoom, and try to implement a generic affine transformation matrix???
    Calc size of dest
    Calc pos of corners
    Bresinem walk from translated top left to bottom left.
        Bres walk across the "row"
        Copy pixel.
    That only leaves the problem of blending.
        Instead of choosing one src pixel, we consider the rectangle from the source
            Where the rect is large, average multiple pixels
            Where the rect is small (less than 2x2 pixels), average parts of each pixel.

Same pattern for sounds and animations, not for font or nine patches.


How about a Scripts tab
    List all scripts double click to edit.
    Show errors / Clear errors

Get Thrust to run via "launch" without the resource symlinks to itchy.
    Need thrust's jar file to be in a lib directory within its resources, and for the jar to be loaded
    after java has started.

iThrust
	Bucket to be more transparent
	Water looks naff

Component : Override all rules. Currently only Font can be overridden.
    Allow to be reset to default (i.e. be restyled).

Create a game which uses the GUI

Create a game using an isometric view, where Z-Order is governed by actor's Y value.
    







